
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="The Tremor Team">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.1, mkdocs-material-7.1.8">
    
    
      
        <title>Offramps - Tremor Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ca7ac06f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.f1a3b89f.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#offramps" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Tremor Documentation" class="md-header__button md-logo" aria-label="Tremor Documentation" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Tremor Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Offramps
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/tremor-rs/tremor-www-docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    tremor-rs/tremor-www-docs
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Tremor Documentation" class="md-nav__button md-logo" aria-label="Tremor Documentation" data-md-component="logo">
      
  <img src="../img/logo.png" alt="logo">

    </a>
    Tremor Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/tremor-rs/tremor-www-docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    tremor-rs/tremor-www-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../overview.html" class="md-nav__link">
        Architecture Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      <label class="md-nav__link" for="__nav_3">
        Tremor Query
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Tremor Query" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Tremor Query
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-query/index.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-query/operators.html" class="md-nav__link">
        Operators
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-query/modules.html" class="md-nav__link">
        Modules
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-query/pp.html" class="md-nav__link">
        Lexical Preprocessor
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-query/walkthrough.html" class="md-nav__link">
        Walkthrough
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_6" type="checkbox" id="__nav_3_6" >
      
      <label class="md-nav__link" for="__nav_3_6">
        Aggregate Function Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Aggregate Function Reference" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_6">
          <span class="md-nav__icon md-icon"></span>
          Aggregate Function Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-query/functions.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-query/functions/stats.html" class="md-nav__link">
        stats
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-query/functions/win.html" class="md-nav__link">
        win
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-query/recipes.html" class="md-nav__link">
        Recipes
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Tremor Script
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Tremor Script" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Tremor Script
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/index.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/modules.html" class="md-nav__link">
        Modules
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/pp.html" class="md-nav__link">
        Lexical Preprocessor
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" type="checkbox" id="__nav_4_4" >
      
      <label class="md-nav__link" for="__nav_4_4">
        Function Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Function Reference" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Function Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/functions.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/cncf.html" class="md-nav__link">
        cncf
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/tremor.html" class="md-nav__link">
        tremor
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/std.html" class="md-nav__link">
        std
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/tremor/origin.html" class="md-nav__link">
        tremor::origin
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/tremor/chash.html" class="md-nav__link">
        tremor::chash
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/tremor/system.html" class="md-nav__link">
        tremor::system
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/cncf/otel.html" class="md-nav__link">
        cncf::otel
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/cncf/otel/trace.html" class="md-nav__link">
        cncf::otel::trace
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/cncf/otel/metrics.html" class="md-nav__link">
        cncf::otel::metrics
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/cncf/otel/trace_id.html" class="md-nav__link">
        cncf::otel::trace_id
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/cncf/otel/logs.html" class="md-nav__link">
        cncf::otel::logs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/cncf/otel/span_id.html" class="md-nav__link">
        cncf::otel::span_id
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/cncf/otel/trace/status.html" class="md-nav__link">
        cncf::otel::trace::status
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/cncf/otel/trace/spankind.html" class="md-nav__link">
        cncf::otel::trace::spankind
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/cncf/otel/metrics/temporality.html" class="md-nav__link">
        cncf::otel::metrics::temporality
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/cncf/otel/logs/severity.html" class="md-nav__link">
        cncf::otel::logs::severity
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/cncf/otel/logs/traceflags.html" class="md-nav__link">
        cncf::otel::logs::traceflags
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/std/re.html" class="md-nav__link">
        std::re
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/std/base64.html" class="md-nav__link">
        std::base64
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/std/record.html" class="md-nav__link">
        std::record
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/std/test.html" class="md-nav__link">
        std::test
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/std/math.html" class="md-nav__link">
        std::math
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/std/float.html" class="md-nav__link">
        std::float
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/std/array.html" class="md-nav__link">
        std::array
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/std/string.html" class="md-nav__link">
        std::string
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/std/json.html" class="md-nav__link">
        std::json
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/std/type.html" class="md-nav__link">
        std::type
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/std/binary.html" class="md-nav__link">
        std::binary
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/std/url.html" class="md-nav__link">
        std::url
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/std/range.html" class="md-nav__link">
        std::range
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/std/random.html" class="md-nav__link">
        std::random
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/stdlib/std/integer.html" class="md-nav__link">
        std::integer
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" type="checkbox" id="__nav_4_5" >
      
      <label class="md-nav__link" for="__nav_4_5">
        Extractor Reference
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Extractor Reference" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          Extractor Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/extractors.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/extractors/base64.html" class="md-nav__link">
        Base64
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/extractors/cidr.html" class="md-nav__link">
        CIDR
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/extractors/datetime.html" class="md-nav__link">
        Datetime
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/extractors/dissect.html" class="md-nav__link">
        Dissect
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/extractors/glob.html" class="md-nav__link">
        Glob
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/extractors/grok.html" class="md-nav__link">
        Grok
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/extractors/influx.html" class="md-nav__link">
        Influx
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/extractors/json.html" class="md-nav__link">
        JSON
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/extractors/kv.html" class="md-nav__link">
        KV
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/extractors/regex.html" class="md-nav__link">
        Regex
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../tremor-script/recipes.html" class="md-nav__link">
        Recipes
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        Operations
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Operations" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Operations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../operations/configuration.html" class="md-nav__link">
        Configuration
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../operations/monitoring.html" class="md-nav__link">
        Monitoring
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../operations/cli.html" class="md-nav__link">
        Tremor Tool
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../operations/configuration-walkthrough.html" class="md-nav__link">
        Configuration Walkthrough
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../operations/gdcb.html" class="md-nav__link">
        Circuit Breakers and Guaranteed Delivery
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../operations/linked-transports.html" class="md-nav__link">
        Linked Transports
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      <label class="md-nav__link" for="__nav_6">
        Artefacts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Artefacts" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Artefacts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="preprocessors.html" class="md-nav__link">
        Preprocessors
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="postprocessors.html" class="md-nav__link">
        Postprocessors
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="codecs.html" class="md-nav__link">
        Codecs
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="onramps.html" class="md-nav__link">
        Onramps
      </a>
    </li>
  

          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Offramps
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="offramps.html" class="md-nav__link md-nav__link--active">
        Offramps
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#delivery-properties" class="md-nav__link">
    Delivery Properties
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-offramps" class="md-nav__link">
    System Offramps
  </a>
  
    <nav class="md-nav" aria-label="System Offramps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#systemstdout" class="md-nav__link">
    system::stdout
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#systemstderr" class="md-nav__link">
    system::stderr
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-offramps" class="md-nav__link">
    Supported Offramps
  </a>
  
    <nav class="md-nav" aria-label="Supported Offramps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#amqp" class="md-nav__link">
    amqp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blackhole" class="md-nav__link">
    blackhole
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cb" class="md-nav__link">
    cb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug" class="md-nav__link">
    debug
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns" class="md-nav__link">
    dns
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#elastic" class="md-nav__link">
    elastic
  </a>
  
    <nav class="md-nav" aria-label="elastic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linked-transport" class="md-nav__link">
    Linked Transport
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exit" class="md-nav__link">
    exit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file" class="md-nav__link">
    file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gcs" class="md-nav__link">
    gcs
  </a>
  
    <nav class="md-nav" aria-label="gcs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#list_buckets" class="md-nav__link">
    list_buckets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list_objects" class="md-nav__link">
    list_objects
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create_bucket" class="md-nav__link">
    create_bucket
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove_bucket" class="md-nav__link">
    remove_bucket
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upload_object" class="md-nav__link">
    upload_object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetch_object" class="md-nav__link">
    fetch_object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#download_object" class="md-nav__link">
    download_object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove_object" class="md-nav__link">
    remove_object
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpub" class="md-nav__link">
    gpub
  </a>
  
    <nav class="md-nav" aria-label="gpub">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#send_message" class="md-nav__link">
    send_message
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kafka" class="md-nav__link">
    Kafka
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kv" class="md-nav__link">
    kv
  </a>
  
    <nav class="md-nav" aria-label="kv">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#put" class="md-nav__link">
    put
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete" class="md-nav__link">
    delete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scan" class="md-nav__link">
    scan
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cas" class="md-nav__link">
    cas
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nats" class="md-nav__link">
    nats
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newrelic" class="md-nav__link">
    newrelic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#otel" class="md-nav__link">
    otel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgresql" class="md-nav__link">
    PostgreSQL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rest" class="md-nav__link">
    rest
  </a>
  
    <nav class="md-nav" aria-label="rest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rest-offramp-example-for-influxdb" class="md-nav__link">
    rest offramp example for InfluxDB
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stderr" class="md-nav__link">
    stderr
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdout" class="md-nav__link">
    stdout
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcp" class="md-nav__link">
    tcp
  </a>
  
    <nav class="md-nav" aria-label="tcp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tls-support" class="md-nav__link">
    TLS Support
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#udp" class="md-nav__link">
    udp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ws" class="md-nav__link">
    ws
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../api.html" class="md-nav__link">
        API
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../history.html" class="md-nav__link">
        History
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../Glossary.html" class="md-nav__link">
        Glossary
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      <label class="md-nav__link" for="__nav_10">
        Workshops
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Workshops" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Workshops
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_1" type="checkbox" id="__nav_10_1" >
      
      <label class="md-nav__link" for="__nav_10_1">
        Basic examples
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Basic examples" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_1">
          <span class="md-nav__icon md-icon"></span>
          Basic examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/00_passthrough/index.html" class="md-nav__link">
        Passthrough
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/01_filter/index.html" class="md-nav__link">
        Filter
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/02_transform/index.html" class="md-nav__link">
        Transform
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/03_validate/index.html" class="md-nav__link">
        Validate
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_2" type="checkbox" id="__nav_10_2" >
      
      <label class="md-nav__link" for="__nav_10_2">
        Integrations
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Integrations" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_2">
          <span class="md-nav__icon md-icon"></span>
          Integrations
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/10_logstash/index.html" class="md-nav__link">
        Logstash
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/11_influx/index.html" class="md-nav__link">
        Influx
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/12_postgres_timescaledb/index.html" class="md-nav__link">
        Timescale
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/13_grafana/index.html" class="md-nav__link">
        Grafana
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_3" type="checkbox" id="__nav_10_3" >
      
      <label class="md-nav__link" for="__nav_10_3">
        Delivery Guarantees
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Delivery Guarantees" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_3">
          <span class="md-nav__icon md-icon"></span>
          Delivery Guarantees
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/20_transient_gd/index.html" class="md-nav__link">
        Transient GD
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/21_persistent_gd/index.html" class="md-nav__link">
        Persistent GD
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/22_roundrobin/index.html" class="md-nav__link">
        Round Robin
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/23_kafka_gd/index.html" class="md-nav__link">
        Kafka
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_4" type="checkbox" id="__nav_10_4" >
      
      <label class="md-nav__link" for="__nav_10_4">
        Linked Ramps
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Linked Ramps" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_4">
          <span class="md-nav__icon md-icon"></span>
          Linked Ramps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/30_servers_lt_http/index.html" class="md-nav__link">
        HTTP Server
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/31_servers_lt_ws/index.html" class="md-nav__link">
        Websocket Server
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/32_proxies_lt_http/index.html" class="md-nav__link">
        HTTP Proxy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/33_proxies_lt_ws/index.html" class="md-nav__link">
        Websocket Proxy
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/34_bridges_lt_http_ws/index.html" class="md-nav__link">
        HTTP -> WS Bridge
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/35_reverse_proxy_load_balancing/index.html" class="md-nav__link">
        HTTP Load Balancing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/36_quota_service/index.html" class="md-nav__link">
        Quota Service
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/37_configurator/index.html" class="md-nav__link">
        Configurator
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/38_polling_alerts/index.html" class="md-nav__link">
        Polling and Alerting
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/39_kafka_elastic_correlation/index.html" class="md-nav__link">
        Event Correlation from Kafka to Elasticsearch
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10_5" type="checkbox" id="__nav_10_5" >
      
      <label class="md-nav__link" for="__nav_10_5">
        CNCF
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="CNCF" data-md-level="2">
        <label class="md-nav__title" for="__nav_10_5">
          <span class="md-nav__icon md-icon"></span>
          CNCF
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/40_otel_passthrough/index.html" class="md-nav__link">
        OpenTelemetry Passthrough
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/41_otel_zipkin/index.html" class="md-nav__link">
        Zipkin Interworking
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/42_otel_jaeger/index.html" class="md-nav__link">
        Jaeger Interworking
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/43_otel_prometheus/index.html" class="md-nav__link">
        Prometheus Interworking
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../workshop/examples/44_otel_elastic_apm/index.html" class="md-nav__link">
        Elastic APM Interworking
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      <label class="md-nav__link" for="__nav_11">
        Development
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Development" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../development/quick-start.html" class="md-nav__link">
        Quick Start Guide
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../development/profiling.html" class="md-nav__link">
        Profiling
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../development/debugging.html" class="md-nav__link">
        Debugging with LLDB
      </a>
    </li>
  

          
            
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11_4" type="checkbox" id="__nav_11_4" >
      
      <label class="md-nav__link" for="__nav_11_4">
        Benchmarking
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Benchmarking" data-md-level="2">
        <label class="md-nav__title" for="__nav_11_4">
          <span class="md-nav__icon md-icon"></span>
          Benchmarking
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../development/benchmarking.html" class="md-nav__link">
        Overview
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../development/benchmarks/LogstashBenchmark.html" class="md-nav__link">
        Logstash
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../development/testing.html" class="md-nav__link">
        Testing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../development/issue-investigation.html" class="md-nav__link">
        Investigation
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      <label class="md-nav__link" for="__nav_12">
        Governance
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Governance" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Governance
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CodeOfConduct.html" class="md-nav__link">
        Code of Conduct
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Contributing.html" class="md-nav__link">
        Contributing
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../CII.html" class="md-nav__link">
        Core Infrastructure Initiative
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../policies/security.html" class="md-nav__link">
        Security
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#delivery-properties" class="md-nav__link">
    Delivery Properties
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-offramps" class="md-nav__link">
    System Offramps
  </a>
  
    <nav class="md-nav" aria-label="System Offramps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#systemstdout" class="md-nav__link">
    system::stdout
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#systemstderr" class="md-nav__link">
    system::stderr
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#supported-offramps" class="md-nav__link">
    Supported Offramps
  </a>
  
    <nav class="md-nav" aria-label="Supported Offramps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#amqp" class="md-nav__link">
    amqp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blackhole" class="md-nav__link">
    blackhole
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cb" class="md-nav__link">
    cb
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug" class="md-nav__link">
    debug
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dns" class="md-nav__link">
    dns
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#elastic" class="md-nav__link">
    elastic
  </a>
  
    <nav class="md-nav" aria-label="elastic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#linked-transport" class="md-nav__link">
    Linked Transport
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exit" class="md-nav__link">
    exit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file" class="md-nav__link">
    file
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gcs" class="md-nav__link">
    gcs
  </a>
  
    <nav class="md-nav" aria-label="gcs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#list_buckets" class="md-nav__link">
    list_buckets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#list_objects" class="md-nav__link">
    list_objects
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create_bucket" class="md-nav__link">
    create_bucket
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove_bucket" class="md-nav__link">
    remove_bucket
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#upload_object" class="md-nav__link">
    upload_object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fetch_object" class="md-nav__link">
    fetch_object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#download_object" class="md-nav__link">
    download_object
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove_object" class="md-nav__link">
    remove_object
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gpub" class="md-nav__link">
    gpub
  </a>
  
    <nav class="md-nav" aria-label="gpub">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#send_message" class="md-nav__link">
    send_message
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kafka" class="md-nav__link">
    Kafka
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kv" class="md-nav__link">
    kv
  </a>
  
    <nav class="md-nav" aria-label="kv">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#put" class="md-nav__link">
    put
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete" class="md-nav__link">
    delete
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scan" class="md-nav__link">
    scan
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cas" class="md-nav__link">
    cas
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nats" class="md-nav__link">
    nats
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#newrelic" class="md-nav__link">
    newrelic
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#otel" class="md-nav__link">
    otel
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postgresql" class="md-nav__link">
    PostgreSQL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rest" class="md-nav__link">
    rest
  </a>
  
    <nav class="md-nav" aria-label="rest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rest-offramp-example-for-influxdb" class="md-nav__link">
    rest offramp example for InfluxDB
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stderr" class="md-nav__link">
    stderr
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stdout" class="md-nav__link">
    stdout
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tcp" class="md-nav__link">
    tcp
  </a>
  
    <nav class="md-nav" aria-label="tcp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tls-support" class="md-nav__link">
    TLS Support
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#udp" class="md-nav__link">
    udp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ws" class="md-nav__link">
    ws
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/tremor-rs/tremor-www-docs/edit/main/docs/artefacts/offramps.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="offramps">Offramps<a class="headerlink" href="#offramps" title="Permanent link">&para;</a></h1>
<p>Specify how tremor connects to the outside world in order to publish to external systems.</p>
<p>For example, the Elastic offramp pushes data to ElasticSearch via its bulk upload REST/HTTP API endpoint.</p>
<p>All <code>offramps</code> are specified in the following form:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;unique offramp id&gt;</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;offramp name&gt;</span>
    <span class="nt">codec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;codec of the data&gt;</span>
    <span class="nt">postprocessors</span><span class="p">:</span> <span class="c1"># can be omitted</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;postprocessor 1&gt;</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;postprocessor 2&gt;</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">...</span>
    <span class="nt">preprocessors</span><span class="p">:</span> <span class="c1"># only for linked transport, can be omitted</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;preprocessor 1&gt;</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">&lt;preprocessor 2&gt;</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">...</span>
    <span class="nt">linked</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;true or false&gt;</span> <span class="c1"># enable linked transport, default: false</span>
    <span class="nt">codec_map</span><span class="p">:</span>
      <span class="s">&quot;&lt;mime-type&gt;&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;&lt;codec</span><span class="nv"> </span><span class="s">handling</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">given</span><span class="nv"> </span><span class="s">mime-type&gt;&quot;</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">&lt;key&gt;</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;value&gt;</span>
</code></pre></div>
<h2 id="delivery-properties">Delivery Properties<a class="headerlink" href="#delivery-properties" title="Permanent link">&para;</a></h2>
<p>Each offramp is able to report events as being definitely sent off or as failed. It can also report itself as not functional anymore to the connected pipelines. How each offramp implements those abilities is described in the table below.</p>
<p>The column <code>Delivery acknowledgements</code> describes under what circumstances the offramp considers an event delivered and acknowledges it to the connected pipelines and operators, onramps etc. therein.
Acknowledgements, Failures or missing Acknowledgements take effect e.g. when using the operators or onramps that support those mechanisms (e.g. the WAL operator or the Kafka onramp).</p>
<p>The column <code>Disconnect events</code> describes under which circumstances this offramp is not considered functional anymore.</p>
<table>
<thead>
<tr>
<th>Offramp</th>
<th>Disconnect events</th>
<th>Delivery acknowledgements</th>
</tr>
</thead>
<tbody>
<tr>
<td>amqp</td>
<td>never</td>
<td>always</td>
</tr>
<tr>
<td>blackhole</td>
<td>never</td>
<td>always</td>
</tr>
<tr>
<td>cb</td>
<td>never</td>
<td>always</td>
</tr>
<tr>
<td>debug</td>
<td>never</td>
<td>always</td>
</tr>
<tr>
<td>dns</td>
<td>never</td>
<td>always</td>
</tr>
<tr>
<td>elastic</td>
<td>connection loss</td>
<td>on 200 replies</td>
</tr>
<tr>
<td>exit</td>
<td>never</td>
<td>always</td>
</tr>
<tr>
<td>file</td>
<td>never</td>
<td>always</td>
</tr>
<tr>
<td>gcs</td>
<td>never</td>
<td>on successful send</td>
</tr>
<tr>
<td>kafka</td>
<td>see librdkafka</td>
<td>see librdkafka</td>
</tr>
<tr>
<td>kv</td>
<td>never</td>
<td>always</td>
</tr>
<tr>
<td>nats</td>
<td>connection loss</td>
<td>always</td>
</tr>
<tr>
<td>newrelic</td>
<td>never</td>
<td>never</td>
</tr>
<tr>
<td>otel</td>
<td>connection loss</td>
<td>on successful delivery</td>
</tr>
<tr>
<td>Postgres</td>
<td>never</td>
<td>always</td>
</tr>
<tr>
<td>rest</td>
<td>connection loss</td>
<td>on non 4xx/5xx replies</td>
</tr>
<tr>
<td>stderr</td>
<td>never</td>
<td>always</td>
</tr>
<tr>
<td>stdout</td>
<td>never</td>
<td>always</td>
</tr>
<tr>
<td>tcp</td>
<td>connection loss</td>
<td>on send</td>
</tr>
<tr>
<td>udp</td>
<td>local socket loss</td>
<td>on send</td>
</tr>
<tr>
<td>ws</td>
<td>connection loss</td>
<td>on send</td>
</tr>
</tbody>
</table>
<h2 id="system-offramps">System Offramps<a class="headerlink" href="#system-offramps" title="Permanent link">&para;</a></h2>
<p>Each tremor runtime comes with some pre-configured <code>offramps</code> that can be used.</p>
<h3 id="systemstdout">system::stdout<a class="headerlink" href="#systemstdout" title="Permanent link">&para;</a></h3>
<p>The offramp <code>/offramp/system::stdout/system</code> can be used to print to STDOUT. Data will be formatted as JSON.</p>
<h3 id="systemstderr">system::stderr<a class="headerlink" href="#systemstderr" title="Permanent link">&para;</a></h3>
<p>The offramp <code>/offramp/system::stderr/system</code> can be used to print to STDERR. Data will be formatted as JSON.</p>
<h2 id="supported-offramps">Supported Offramps<a class="headerlink" href="#supported-offramps" title="Permanent link">&para;</a></h2>
<h3 id="amqp">amqp<a class="headerlink" href="#amqp" title="Permanent link">&para;</a></h3>
<p>The amqp offramp publishes AMQP messages to an <a href="https://www.amqp.org">AMQP</a> broker. It uses <a href="https://docs.rs/lapin/1.6.8/lapin/">lapin</a> for an AMQP 0.9.1 protocol implementation.</p>
<p>Example:</p>
<p><div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">amqp</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">amqp</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">amqp_addr</span><span class="p">:</span> <span class="s">&quot;amqp://guest:guest@127.0.0.1:5672/&quot;</span>
      <span class="nt">exchange</span><span class="p">:</span> <span class="s">&quot;&quot;</span>
      <span class="nt">routing_key</span><span class="p">:</span> <span class="s">&quot;hello&quot;</span>
      <span class="nt">publish_options</span><span class="p">:</span>
        <span class="nt">immediate</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="nt">mandatory</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div>
Supported configuration options are:</p>
<ul>
<li><code>amqp_addr</code> - an AMQP URI as string, required. For more details see <a href="https://www.rabbitmq.com/uri-spec.html">AMQP 0.9.1 URI spec</a>.</li>
<li><code>exchange</code> - The exchange to publish messages to. Format: String, optional, defaults to the empty string and then publish to the default exchange.</li>
<li><code>routing_key</code> - Specifies the routing key for the message. The routing key is used for routing messages depending on the exchange configuration. Format: String, optional, defaults to the empty string.</li>
<li><code>publish_options</code> - Required config that controls what happens when a message cannot be routed to a queue</li>
<li><code>immediate</code> - This flag tells the server how to react if the message cannot be routed to a queue consumer immediately. If this flag is <code>true</code>, the server will return an undeliverable message with a Return method. If this flag is <code>false</code>, the server will queue the message, but with no guarantee that it will ever be consumed. Default: <code>false</code>.</li>
<li><code>mandatory</code> - This flag tells the server how to react if the message cannot be routed to a queue. If this flag is <code>true</code>, the server will return an unroutable message with a Return method. If this flag is false, the server silently drops the message. Default: <code>false</code>.</li>
</ul>
<p>Events are published (after being serialized and possibly chunked codec and postprocessors) as AMQP Messages to the specified <code>exchange</code> (empty string is the default exchange) using the specified routing key.</p>
<p>This offramp uses the AMQP 0.9.1 <a href="https://www.rabbitmq.com/amqp-0-9-1-reference.html#basic.publish">basic-publish operation</a>.</p>
<h3 id="blackhole">blackhole<a class="headerlink" href="#blackhole" title="Permanent link">&para;</a></h3>
<p>The blackhole offramp is used for benchmarking it takes measurements of the end to end times of each event traversing the pipeline and at the end prints an HDR ( High Dynamic Range ) <a href="http://hdrhistogram.org/">histogram</a>.</p>
<p>Supported configuration options are:</p>
<ul>
<li><code>warmup_secs</code> - Number of seconds after startup in which latency won't be measured to allow for a warmup delay.</li>
<li><code>stop_after_secs</code> - Stop tremor after a given number of seconds and print the histogram.</li>
<li><code>significant_figures</code> - Significant figures for the HDR histogram. (the first digits of each measurement that are kept as precise values)</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bh</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">blackhole</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">warmup_secs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
      <span class="nt">stop_after_secs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">40</span>
</code></pre></div>
<h3 id="cb">cb<a class="headerlink" href="#cb" title="Permanent link">&para;</a></h3>
<p><code>cb</code> is short for circuit breaker. This offramp can be used to trigger certain circuit breaker events manually by sending the intended circuit breaker event in the event metadata or the event data.
Supported payloads are:</p>
<ul>
<li><code>ack</code></li>
<li><code>fail</code></li>
<li><code>trigger</code> or <code>close</code></li>
<li><code>open</code> or <code>restore</code></li>
</ul>
<p>No matter how many <code>ack</code> and <code>fail</code> strings the <code>cb</code> key contains, only ever one <code>ack</code> or <code>fail</code> CB event will be emitted, to stay within the CB protocol.
 The same is true for <code>trigger</code>/<code>close</code> and <code>open</code>/<code>restore</code> strings, only one of those two will be emitted, never more.</p>
<p>Example config:</p>
<div class="highlight"><pre><span></span><code> <span class="nt">offramp</span><span class="p">:</span>
   <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cb_tester</span>
     <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cb</span>
</code></pre></div>
<p>Example payloads:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;cb&quot;</span><span class="p">:</span> <span class="s2">&quot;ack&quot;</span><span class="p">,</span>
  <span class="nt">&quot;some_other_field&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;cb&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;fail&quot;</span><span class="p">,</span> <span class="s2">&quot;close&quot;</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>Such an event or metadata will result in two CB insight events be sent back, one <code>fail</code> event, and one <code>close</code> event.</p>
<h3 id="debug">debug<a class="headerlink" href="#debug" title="Permanent link">&para;</a></h3>
<p>The debug offramp is used to get an overview of how many events are put in which classification.</p>
<p>This operator does not support configuration.</p>
<p>Used metadata variables:</p>
<ul>
<li><code>$class</code> - Class of the event to count by. (optional)</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">dbg</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">debug</span>
</code></pre></div>
<h3 id="dns">dns<a class="headerlink" href="#dns" title="Permanent link">&para;</a></h3>
<p>The <code>dns</code> linked offramp allows performing DNS queries against the system resolver.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>No codecs, configuration, or processors are supported.</p>
</div>
<p>Example:
<div class="highlight"><pre><span></span><code>  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">dns</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">dns</span>
</code></pre></div></p>
<p>The event needs the following structure:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;lookup&quot;</span><span class="p">:</span> <span class="s2">&quot;tremor.rs&quot;</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;lookup&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;tremor.rs&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;CNAME&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>where type can be one of (please consult your DNS manual for the meaning of each):</p>
<ul>
<li><code>A</code></li>
<li><code>AAAA</code></li>
<li><code>ANAME</code></li>
<li><code>CNAME</code></li>
<li><code>TXT</code></li>
<li><code>PTR</code></li>
<li><code>CAA</code></li>
<li><code>HINFO</code></li>
<li><code>HTTPS</code></li>
<li><code>MX</code></li>
<li><code>NAPTR</code></li>
<li><code>NULL</code></li>
<li><code>NS</code></li>
<li><code>OPENPGPKEY</code></li>
<li><code>SOA</code></li>
<li><code>SRV</code></li>
<li><code>SSHFP</code></li>
<li><code>SVCB</code></li>
<li><code>TLSA</code></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If type is not specified <code>A</code> records will be looked up</p>
</div>
<p>Responses are an Array of objects denoting the type of record found as a key, followed by the entry as a string and a <code>ttl</code> for the record (please consult your DNS manual for the return value of different record types):</p>
<div class="highlight"><pre><span></span><code><span class="p">[</span>
  <span class="p">{</span><span class="nt">&quot;A&quot;</span><span class="p">:</span> <span class="s2">&quot;1.2.3.4&quot;</span><span class="p">,</span> <span class="nt">&quot;ttl&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">},</span>
  <span class="p">{</span><span class="nt">&quot;CNAME&quot;</span><span class="p">:</span> <span class="s2">&quot;www.tremor.rs&quot;</span><span class="p">,</span> <span class="nt">&quot;ttl&quot;</span><span class="p">:</span> <span class="mi">120</span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
<h3 id="elastic">elastic<a class="headerlink" href="#elastic" title="Permanent link">&para;</a></h3>
<p>The elastic offramp writes to one or more ElasticSearch nodes. This is currently tested with ES v6 and v7.</p>
<p>Supported configuration options are:</p>
<ul>
<li><code>nodes</code> - A list of elastic search nodes to contact. These are the nodes to which tremor will send traffic to.</li>
<li><code>concurrency</code> - Maximum number of parallel requests (default: 4).</li>
</ul>
<p>Events will be sent to the connected ElasticSearch cluster via the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html">ES Bulk API</a> using the <code>index</code> action.
It is recommended to batch events sent to this sink using the <a href="../tremor-query/operators.html#genericbatch">generic::batch operator</a> to reduce the overhead
introduced by the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html">ES Bulk API</a>.</p>
<p>The configuration options <code>codec</code> and <code>postprocessors</code> are not used, as elastic will always serialize event payloads as JSON.</p>
<p>If the number of parallel requests surpass <code>concurrency</code>, an error event will be emitted to the <code>err</code> port, which can be used for appropriate error handling.</p>
<p>The following metadata variables can be specified on a per event basis:</p>
<ul>
<li><code>$elastic["_index"]</code> - The index to write to (required).</li>
<li><code>$elastic["_type"]</code> - The document type for elastic (optional), deprecated in ES 7.</li>
<li><code>$elastic["_id"]</code>   - The document id for elastic (optional).</li>
<li><code>$elastic.pipeline</code> - The ElasticSearch pipeline to use (optional).</li>
<li><code>$elastic.action</code> - The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html">bulk action</a> to perform, one of <code>delete</code>, <code>create</code>, <code>update</code> or <code>index</code>. If no <code>action</code> is provided it defaults to <code>index</code>. <code>delete</code> and <code>update</code> require <code>$elastic._id</code> to be set or elastic search will have error.</li>
</ul>
<h4 id="linked-transport">Linked Transport<a class="headerlink" href="#linked-transport" title="Permanent link">&para;</a></h4>
<p>If used as a linked transport, the sink will emit events in case of errors sending data to ES or if the incoming event is malformed via the <code>err</code> port.
Also, upon a returned ES Bulk request, it will emit an event for each bulk item, denoting success or failure.</p>
<p><em>Success Responses</em></p>
<p>Events denoting success are sent via the <code>out</code> port and have the following format:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;success&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;event_id&quot;</span><span class="p">:</span> <span class="s2">&quot;1:2:3&quot;</span><span class="p">,</span>
    <span class="nt">&quot;origin&quot;</span><span class="p">:</span> <span class="s2">&quot;file:///tmp/input.json.xz&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;payload&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div>
<p>The event metadata will contain the following:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;elastic&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;ES document id&quot;</span><span class="p">,</span>
    <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;ES document type&quot;</span><span class="p">,</span>
    <span class="nt">&quot;_index&quot;</span><span class="p">:</span> <span class="s2">&quot;ES index&quot;</span><span class="p">,</span>
    <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;ES document version&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><em>Error Responses</em></p>
<p>Events denoting bulk item failure are sent via the <code>err</code> port and have the following format:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;success&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;event_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2:3:4&quot;</span><span class="p">,</span>
    <span class="nt">&quot;origin&quot;</span><span class="p">:</span> <span class="kc">null</span>
  <span class="p">},</span>
  <span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="p">{},</span>
  <span class="nt">&quot;payload&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div>
<p><code>error</code> will contain the error description object returned from ES.</p>
<p>The event metadata for failed events looks as follows:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;elastic&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;ES document id&quot;</span><span class="p">,</span>
    <span class="nt">&quot;_type&quot;</span><span class="p">:</span> <span class="s2">&quot;ES document type&quot;</span><span class="p">,</span>
    <span class="nt">&quot;_index&quot;</span><span class="p">:</span> <span class="s2">&quot;ES index&quot;</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Error Responses that are not scoped to bulk items, but the whole operation of turning the event into a Elasticsearch Bulk Request and sending that request to Elasticsearch
will have the same payload format as Bulk item errors, but the <code>$elastic</code> metadata is missing:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;success&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;event_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2:3:4&quot;</span><span class="p">,</span>
    <span class="nt">&quot;origin&quot;</span><span class="p">:</span> <span class="s2">&quot;tremor-rest://example.org/&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;error&quot;</span><span class="p">:</span> <span class="p">{},</span>
  <span class="nt">&quot;payload&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</code></pre></div>
<p>For both error and success responses <code>payload</code> is the event payload that was sent to ES.</p>
<p>Example Configuration:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">es</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">elastic</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">nodes</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">http://elastic:9200</span>
</code></pre></div>
<p>Example Configuration for linked transport (including binding):</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">es-linked</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">elastic</span>
    <span class="nt">linked</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">nodes</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">http://elastic1:9200</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">http://elastic2:9200</span>
      <span class="nt">concurrency</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8</span>

<span class="nt">binding</span><span class="p">:</span>
  <span class="nt">id</span><span class="p">:</span> <span class="s">&quot;es-linked-binding&quot;</span>
  <span class="nt">links</span><span class="p">:</span>
    <span class="s">&quot;/onramp/example/{instance}/out&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;/pipeline/to_elastic/{instance}/in&quot;</span><span class="p p-Indicator">]</span>
    <span class="s">&quot;/pipeline/to_elastic/{instance}/in&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;/offramp/es-linked/{instance}/in&quot;</span><span class="p p-Indicator">]</span>

    <span class="c1"># handle success and error messages with different pipelines</span>
    <span class="s">&quot;/offramp/es-linked/{instance}/out&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;/pipeline/handle-es-success/{instance}/in&quot;</span><span class="p p-Indicator">]</span>
    <span class="s">&quot;/offramp/es-linked/{instance}/err&quot;</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;/pipeline/handle-es-error/{instance}/in&quot;</span><span class="p p-Indicator">]</span>

    <span class="c1"># more links...</span>
    <span class="l l-Scalar l-Scalar-Plain">...</span>
</code></pre></div>
<h3 id="exit">exit<a class="headerlink" href="#exit" title="Permanent link">&para;</a></h3>
<p>The exit offramp terminates the runtime with a system exit status.</p>
<p>The offramp accepts events via its standard input port and responds
to events with a record structure containing a numeric exit field.</p>
<p>To indicate successful termination, an <code>exit</code> status of zero may be used:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span> <span class="nt">&quot;exit&quot;</span><span class="p">:</span> <span class="mi">0</span> <span class="p">}</span>
</code></pre></div>
<p>To indicate non-successful termination, a non-zero <code>exit</code> status may be used:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span> <span class="nt">&quot;exit&quot;</span><span class="p">:</span> <span class="mi">1</span> <span class="p">}</span>
</code></pre></div>
<p>Exit codes should follow standard UNIX/Linux guidelines when being integrated
with <code>bash</code> or other shell-based environments, as follows:</p>
<!--alex ignore illegal-->

<table>
<thead>
<tr>
<th>Code</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Success</td>
</tr>
<tr>
<td>1</td>
<td>General errors</td>
</tr>
<tr>
<td>2</td>
<td>Misuse of builtins</td>
</tr>
<tr>
<td>126</td>
<td>Command invoked cannot run due to credentials/auth constraints</td>
</tr>
<tr>
<td>127</td>
<td>Command not understood, not well-formed or illegal</td>
</tr>
</tbody>
</table>
<p>To delay the exit (to allow flushing of other <code>offramps</code>) the <code>delay</code> key can be used to delay the exit by a number of milliseconds:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="nt">&quot;exit&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nt">&quot;delay&quot;</span><span class="p">:</span> <span class="mi">1000</span>
<span class="p">}</span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">terminate</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">exit</span>
</code></pre></div>
<h3 id="file">file<a class="headerlink" href="#file" title="Permanent link">&para;</a></h3>
<p>The file offramp writes events to a file, one event per line. The file is overwritten if it exists.</p>
<p>The default <a href="codecs.html#json">codec</a> is <code>json</code>.</p>
<p>Supported configuration options are:</p>
<ul>
<li><code>file</code> - The file to write to.</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">in</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">file</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/my/path/to/a/file.json</span>
</code></pre></div>
<h3 id="gcs">gcs<a class="headerlink" href="#gcs" title="Permanent link">&para;</a></h3>
<p>Google Cloud Storage offramp.</p>
<p>This offramp can issue basic operations to list buckets and objects and to create, insert and delete objects from the Google Cloud Platform cloud storage service.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The offramp is experimental.</p>
</div>
<p>This offramp assumes that the environment variable <code>GOOGLE_APPLICATION_CREDENTIALS</code> been exported to the execution environment and it has been configured to point to a valid non-expired service account token json file.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">gcs</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">gcs</span>
    <span class="nt">codec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">json</span>
    <span class="nt">linked</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">postprocessors</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">gzip</span>
    <span class="nt">preprocessors</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">gzip</span>
</code></pre></div>
<p>If the use case for the offramp requires metadata from the Google Cloud Storage service on the supported operations for this offramp, then set linked to true and configure the output port <code>out</code>.
If the use case does not require metadata, then set linked to false.</p>
<h4 id="list_buckets">list_buckets<a class="headerlink" href="#list_buckets" title="Permanent link">&para;</a></h4>
<p>Lists all the buckets in the Google Cloud Storage project.</p>
<p><strong>Request</strong>:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
 <span class="s2">&quot;command&quot;</span><span class="o">:</span> <span class="s2">&quot;list_buckets&quot;</span><span class="p">,</span>
 <span class="s2">&quot;project_id&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;project-id&gt;&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>Response</strong>:
<div class="highlight"><pre><span></span><code><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;cmd&quot;</span><span class="o">:</span> <span class="s2">&quot;list_buckets&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;items&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;location&quot;</span><span class="o">:</span> <span class="s2">&quot;EU&quot;</span><span class="p">,</span>
          <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;bucket-id&gt;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;locationType&quot;</span><span class="o">:</span> <span class="s2">&quot;multi-region&quot;</span><span class="p">,</span>
          <span class="s2">&quot;storageClass&quot;</span><span class="o">:</span> <span class="s2">&quot;STANDARD&quot;</span><span class="p">,</span>
          <span class="s2">&quot;metageneration&quot;</span><span class="o">:</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span>
          <span class="s2">&quot;selfLink&quot;</span><span class="o">:</span> <span class="s2">&quot;https://www.googleapis.com/storage/v1/b/&lt;bucket-id&gt;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;kind&quot;</span><span class="o">:</span> <span class="s2">&quot;storage#bucket&quot;</span><span class="p">,</span>
          <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;bucket-name&gt;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;timeCreated&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;time of creation&gt;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;iamConfiguration&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;uniformBucketLevelAccess&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;enabled&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
              <span class="s2">&quot;lockedTime&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-06-17T09:12:22.122Z&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;bucketPolicyOnly&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;enabled&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
              <span class="s2">&quot;lockedTime&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-06-17T09:12:22.122Z&quot;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="s2">&quot;etag&quot;</span><span class="o">:</span> <span class="s2">&quot;CAQ=&quot;</span><span class="p">,</span>
          <span class="s2">&quot;defaultEventBasedHold&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="s2">&quot;retentionPolicy&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;effectiveTime&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-03-19T09:12:22.122Z&quot;</span><span class="p">,</span>
            <span class="s2">&quot;retentionPeriod&quot;</span><span class="o">:</span> <span class="s2">&quot;60&quot;</span><span class="p">,</span>
            <span class="s2">&quot;isLocked&quot;</span><span class="o">:</span> <span class="kc">false</span>
          <span class="p">},</span>
          <span class="s2">&quot;updated&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-04-13T17:05:29.404Z&quot;</span><span class="p">,</span>
          <span class="s2">&quot;satisfiesPZS&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="s2">&quot;projectNumber&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;project-number&gt;&quot;</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">&quot;kind&quot;</span><span class="o">:</span> <span class="s2">&quot;storage#buckets&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</code></pre></div></p>
<p><strong><em>Where</em></strong></p>
<ul>
<li><code>&lt;project-id&gt;</code> - The project id of the Google Cloud Storage project where the buckets are.</li>
<li><code>&lt;bucket-id&gt;</code> - The unique identifier of the bucket.</li>
<li><code>&lt;project-number&gt;</code> - The project number for the Google Cloud Storage project.</li>
</ul>
<h4 id="list_objects">list_objects<a class="headerlink" href="#list_objects" title="Permanent link">&para;</a></h4>
<p>Lists all the objects in the specified bucket.</p>
<p><strong>Request</strong>:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;command&quot;</span><span class="o">:</span> <span class="s2">&quot;list_objects&quot;</span><span class="p">,</span>
  <span class="s2">&quot;bucket&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;bucket-name&gt;&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>Response</strong>:
<div class="highlight"><pre><span></span><code><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;cmd&quot;</span><span class="o">:</span> <span class="s2">&quot;list_objects&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;items&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;mediaLink&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;bucket&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;bucket-name&gt;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;object-id&gt;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;size&quot;</span><span class="o">:</span> <span class="s2">&quot;1943550&quot;</span><span class="p">,</span>
          <span class="s2">&quot;crc32c&quot;</span><span class="o">:</span> <span class="s2">&quot;0QXXmA==&quot;</span><span class="p">,</span>
          <span class="s2">&quot;storageClass&quot;</span><span class="o">:</span> <span class="s2">&quot;STANDARD&quot;</span><span class="p">,</span>
          <span class="s2">&quot;generation&quot;</span><span class="o">:</span> <span class="s2">&quot;1616145246990906&quot;</span><span class="p">,</span>
          <span class="s2">&quot;metageneration&quot;</span><span class="o">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
          <span class="s2">&quot;timeStorageClassUpdated&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-03-19T09:14:07.012Z&quot;</span><span class="p">,</span>
          <span class="s2">&quot;selfLink&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;kind&quot;</span><span class="o">:</span> <span class="s2">&quot;storage#object&quot;</span><span class="p">,</span>
          <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;object-name&gt;&quot;</span><span class="p">,</span>
          <span class="s2">&quot;md5Hash&quot;</span><span class="o">:</span> <span class="s2">&quot;ucrP5b1N+6JHxn1TKavn/A==&quot;</span><span class="p">,</span>
          <span class="s2">&quot;timeCreated&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-03-19T09:14:07.012Z&quot;</span><span class="p">,</span>
          <span class="s2">&quot;etag&quot;</span><span class="o">:</span> <span class="s2">&quot;CLrk6JqCvO8CEAE=&quot;</span><span class="p">,</span>
          <span class="s2">&quot;updated&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-03-19T09:14:07.012Z&quot;</span><span class="p">,</span>
          <span class="s2">&quot;retentionExpirationTime&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-03-19T09:15:07.012Z&quot;</span><span class="p">,</span>
          <span class="s2">&quot;contentType&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;content-type&gt;&quot;</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="s2">&quot;kind&quot;</span><span class="o">:</span> <span class="s2">&quot;storage#objects&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</code></pre></div></p>
<p><strong><em>Where</em></strong></p>
<ul>
<li><code>&lt;bucket-name&gt;</code> - The name of the Google Cloud Storage bucket where the object is.</li>
<li><code>&lt;object-id&gt;</code> - The unique object identifier.</li>
<li><code>&lt;object-name&gt;</code> - The name of the object in the Google Cloud Stoarge bucket.</li>
<li><code>&lt;content-type&gt;</code> - The type of the object uploaded.</li>
</ul>
<h4 id="create_bucket">create_bucket<a class="headerlink" href="#create_bucket" title="Permanent link">&para;</a></h4>
<p>Creates a bucket in the project specified in the command.</p>
<p><strong>Request</strong>:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;command&quot;</span><span class="o">:</span> <span class="s2">&quot;create_bucket&quot;</span> <span class="p">,</span>
  <span class="s2">&quot;project_id&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;project-id&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;bucket&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;bucket&gt;&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>Response</strong>:
<div class="highlight"><pre><span></span><code><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;cmd&quot;</span><span class="o">:</span> <span class="s2">&quot;create_bucket&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;projectNumber&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;project-number&gt;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;location&quot;</span><span class="o">:</span> <span class="s2">&quot;US&quot;</span><span class="p">,</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;bucket-id&gt;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;etag&quot;</span><span class="o">:</span> <span class="s2">&quot;CAE=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;locationType&quot;</span><span class="o">:</span> <span class="s2">&quot;multi-region&quot;</span><span class="p">,</span>
      <span class="s2">&quot;storageClass&quot;</span><span class="o">:</span> <span class="s2">&quot;STANDARD&quot;</span><span class="p">,</span>
      <span class="s2">&quot;metageneration&quot;</span><span class="o">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
      <span class="s2">&quot;updated&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-04-22T07:37:23.702Z&quot;</span><span class="p">,</span>
      <span class="s2">&quot;selfLink&quot;</span><span class="o">:</span> <span class="s2">&quot;https://www.googleapis.com/storage/v1/b/&lt;bucket-name&gt;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;kind&quot;</span><span class="o">:</span> <span class="s2">&quot;storage#bucket&quot;</span><span class="p">,</span>
      <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;tremor&quot;</span><span class="p">,</span>
      <span class="s2">&quot;iamConfiguration&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;uniformBucketLevelAccess&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;enabled&quot;</span><span class="o">:</span> <span class="kc">false</span>
        <span class="p">},</span>
        <span class="s2">&quot;bucketPolicyOnly&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;enabled&quot;</span><span class="o">:</span> <span class="kc">false</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="s2">&quot;timeCreated&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-04-22T07:37:23.702Z&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</code></pre></div></p>
<p><strong><em>Where</em></strong></p>
<ul>
<li><code>&lt;project-id&gt;</code> - The project id of the Google Cloud Storage project where the bucket is.</li>
<li><code>&lt;bucket-id&gt;</code> - The unique identifier of the bucket.</li>
<li><code>&lt;project-number&gt;</code> - The project number for the Google Cloud Storage project.</li>
</ul>
<h4 id="remove_bucket">remove_bucket<a class="headerlink" href="#remove_bucket" title="Permanent link">&para;</a></h4>
<p>Removes the bucket from the specified project in Google Cloud Storage project.</p>
<p><strong>Request</strong>:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
 <span class="s2">&quot;command&quot;</span><span class="o">:</span> <span class="s2">&quot;remove_bucket&quot;</span><span class="p">,</span>
 <span class="s2">&quot;bucket&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;bucket-name&gt;&quot;</span>
<span class="p">}</span>
</code></pre></div>
<strong>Response</strong>:
<div class="highlight"><pre><span></span><code>
</code></pre></div></p>
<p><strong><em>Where</em></strong></p>
<ul>
<li><code>&lt;bucket-name&gt;</code> - The name of the Google Cloud Storage bucket where the object is.</li>
</ul>
<h4 id="upload_object">upload_object<a class="headerlink" href="#upload_object" title="Permanent link">&para;</a></h4>
<p>Uploads the object to a Google Cloud Storage bucket.</p>
<p><strong>Request</strong>:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
 <span class="s2">&quot;command&quot;</span><span class="o">:</span> <span class="s2">&quot;upload_object&quot;</span><span class="p">,</span>
 <span class="s2">&quot;bucket&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;bucket-name&gt;&quot;</span><span class="p">,</span>
 <span class="s2">&quot;object&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;object-name&gt;&quot;</span><span class="p">,</span>
 <span class="s2">&quot;body&quot;</span><span class="o">:</span> <span class="sb">`&lt;object&gt;`</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>Response</strong>:
<div class="highlight"><pre><span></span><code><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;cmd&quot;</span><span class="o">:</span> <span class="s2">&quot;upload_object&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;mediaLink&quot;</span><span class="o">:</span> <span class="s2">&quot;https://storage.googleapis.com/download/storage/v1/b/&lt;bucket-name&gt;/o/&lt;object-name&gt;?generation=1619077199260663&amp;alt=media&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bucket&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;bucket-name&gt;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;object-id&gt;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;size&quot;</span><span class="o">:</span> <span class="s2">&quot;47&quot;</span><span class="p">,</span>
      <span class="s2">&quot;crc32c&quot;</span><span class="o">:</span> <span class="s2">&quot;a7mrxw==&quot;</span><span class="p">,</span>
      <span class="s2">&quot;storageClass&quot;</span><span class="o">:</span> <span class="s2">&quot;STANDARD&quot;</span><span class="p">,</span>
      <span class="s2">&quot;generation&quot;</span><span class="o">:</span> <span class="s2">&quot;1619077199260663&quot;</span><span class="p">,</span>
      <span class="s2">&quot;metageneration&quot;</span><span class="o">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
      <span class="s2">&quot;timeStorageClassUpdated&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-04-22T07:39:59.278Z&quot;</span><span class="p">,</span>
      <span class="s2">&quot;selfLink&quot;</span><span class="o">:</span> <span class="s2">&quot;https://www.googleapis.com/storage/v1/b/&lt;bucket-name&gt;/o/&lt;object-name&gt;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;kind&quot;</span><span class="o">:</span> <span class="s2">&quot;storage#object&quot;</span><span class="p">,</span>
      <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;april&quot;</span><span class="p">,</span>
      <span class="s2">&quot;md5Hash&quot;</span><span class="o">:</span> <span class="s2">&quot;qhr9326j+3PeIK9koXMHCg==&quot;</span><span class="p">,</span>
      <span class="s2">&quot;timeCreated&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-04-22T07:39:59.278Z&quot;</span><span class="p">,</span>
      <span class="s2">&quot;etag&quot;</span><span class="o">:</span> <span class="s2">&quot;CPfXzcqskfACEAE=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;updated&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-04-22T07:39:59.278Z&quot;</span><span class="p">,</span>
      <span class="s2">&quot;retentionExpirationTime&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-04-22T07:40:59.278Z&quot;</span><span class="p">,</span>
      <span class="s2">&quot;contentType&quot;</span><span class="o">:</span> <span class="s2">&quot;application/json&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</code></pre></div></p>
<p><strong><em>Where</em></strong></p>
<ul>
<li><code>&lt;object&gt;</code> - The object data to be uploaded to a Google Cloud Storage bucket.</li>
<li><code>&lt;bucket-name&gt;</code> - The name of the Google Cloud Storage bucket where the object is.</li>
<li><code>&lt;object-id&gt;</code> - The unique object identifier.</li>
<li><code>&lt;object-name&gt;</code> - The name of the object in the Google Cloud Stoarge bucket.</li>
</ul>
<h4 id="fetch_object">fetch_object<a class="headerlink" href="#fetch_object" title="Permanent link">&para;</a></h4>
<p>Returns the metadata for the object fetched.</p>
<p><strong>Request</strong>:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
 <span class="s2">&quot;command&quot;</span><span class="o">:</span> <span class="s2">&quot;fetch&quot;</span><span class="p">,</span>
 <span class="s2">&quot;bucket&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;bucket-name&gt;&quot;</span><span class="p">,</span>
 <span class="s2">&quot;object&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;object-name&gt;&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>Response</strong>:
<div class="highlight"><pre><span></span><code><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;cmd&quot;</span><span class="o">:</span> <span class="s2">&quot;fetch&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;mediaLink&quot;</span><span class="o">:</span> <span class="s2">&quot;https://storage.googleapis.com/download/storage/v1/b/&lt;bucket-name&gt;/o/&lt;object-name&gt;?generation=1619077199260663&amp;alt=media&quot;</span><span class="p">,</span>
      <span class="s2">&quot;bucket&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;bucket-name&gt;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;object-id&gt;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;size&quot;</span><span class="o">:</span> <span class="s2">&quot;47&quot;</span><span class="p">,</span>
      <span class="s2">&quot;crc32c&quot;</span><span class="o">:</span> <span class="s2">&quot;a7mrxw==&quot;</span><span class="p">,</span>
      <span class="s2">&quot;storageClass&quot;</span><span class="o">:</span> <span class="s2">&quot;STANDARD&quot;</span><span class="p">,</span>
      <span class="s2">&quot;generation&quot;</span><span class="o">:</span> <span class="s2">&quot;1619077199260663&quot;</span><span class="p">,</span>
      <span class="s2">&quot;metageneration&quot;</span><span class="o">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
      <span class="s2">&quot;timeStorageClassUpdated&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-04-22T07:39:59.278Z&quot;</span><span class="p">,</span>
      <span class="s2">&quot;selfLink&quot;</span><span class="o">:</span> <span class="s2">&quot;https://www.googleapis.com/storage/v1/b/&lt;bucket-name&gt;/o/&lt;object-name&gt;&quot;</span><span class="p">,</span>
      <span class="s2">&quot;kind&quot;</span><span class="o">:</span> <span class="s2">&quot;storage#object&quot;</span><span class="p">,</span>
      <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;april&quot;</span><span class="p">,</span>
      <span class="s2">&quot;md5Hash&quot;</span><span class="o">:</span> <span class="s2">&quot;qhr9326j+3PeIK9koXMHCg==&quot;</span><span class="p">,</span>
      <span class="s2">&quot;timeCreated&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-04-22T07:39:59.278Z&quot;</span><span class="p">,</span>
      <span class="s2">&quot;etag&quot;</span><span class="o">:</span> <span class="s2">&quot;CPfXzcqskfACEAE=&quot;</span><span class="p">,</span>
      <span class="s2">&quot;updated&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-04-22T07:39:59.278Z&quot;</span><span class="p">,</span>
      <span class="s2">&quot;retentionExpirationTime&quot;</span><span class="o">:</span> <span class="s2">&quot;2021-04-22T07:40:59.278Z&quot;</span><span class="p">,</span>
      <span class="s2">&quot;contentType&quot;</span><span class="o">:</span> <span class="s2">&quot;application/json&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</code></pre></div></p>
<p><strong><em>Where</em></strong></p>
<ul>
<li><code>&lt;bucket-name&gt;</code> - The name of the Google Cloud Storage bucket where the object is.</li>
<li><code>&lt;object-id&gt;</code> - The unique object identifier.</li>
<li><code>&lt;object-name&gt;</code> - The name of the object in the Google Cloud Stoarge bucket.</li>
</ul>
<h4 id="download_object">download_object<a class="headerlink" href="#download_object" title="Permanent link">&para;</a></h4>
<p>Downloads the object.</p>
<p><strong>Request</strong>:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;command&quot;</span><span class="o">:</span> <span class="s2">&quot;download_object&quot;</span><span class="p">,</span>
  <span class="s2">&quot;bucket&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;bucket-name&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;object&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;object-name&gt;&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>Response</strong>:
<div class="highlight"><pre><span></span><code><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;cmd&quot;</span><span class="o">:</span> <span class="s2">&quot;download_object&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="o">:</span> <span class="sb">`&lt;object&gt;`</span>
  <span class="p">}</span>
<span class="p">]</span>
</code></pre></div></p>
<p><strong><em>Where</em></strong></p>
<ul>
<li><code>&lt;bucket-name&gt;</code> - The name of the Google Cloud Storage bucket where the object is.</li>
<li><code>&lt;object-name&gt;</code> - The name of the object in the Google Cloud Stoarge bucket.</li>
<li><code>&lt;object&gt;</code> - The object downloaded.</li>
</ul>
<h4 id="remove_object">remove_object<a class="headerlink" href="#remove_object" title="Permanent link">&para;</a></h4>
<p>Removes the object from the specified bucket.</p>
<p><strong>Request</strong>:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;command&quot;</span><span class="o">:</span> <span class="s2">&quot;remove_object&quot;</span> <span class="p">,</span>
  <span class="s2">&quot;bucket&quot;</span><span class="o">:</span><span class="s2">&quot;&lt;bucket-name&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;object&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;object-name&gt;&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>Response</strong>:
<div class="highlight"><pre><span></span><code>
</code></pre></div></p>
<p><strong><em>Where</em></strong></p>
<ul>
<li><code>&lt;bucket-name&gt;</code> - The name of the Google Cloud Storage bucket where the object is.</li>
<li><code>&lt;object-name&gt;</code> - The name of the object in the Google Cloud Stoarge bucket.</li>
</ul>
<h3 id="gpub">gpub<a class="headerlink" href="#gpub" title="Permanent link">&para;</a></h3>
<p>Google Cloud Pubsub - Publisher</p>
<p>This offramp can issue basic operation of sending a message to a topic.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The offramp is experimental.</p>
</div>
<p>This offramp assumes that the environment variable <code>GOOGLE_APPLICATION_CREDENTIALS</code> has been exported to the execution environment and it has been configured to point to a valid non-expired service account token json file.</p>
<p>Supported configuration options are:</p>
<ul>
<li><code>pem</code> - The pem file from GCP for authentication.</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">gpub</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">gpub</span>
    <span class="nt">codec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">json</span>
    <span class="nt">postprocessors</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">gzip</span>    
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">pem</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">gcp.pem</span>
</code></pre></div>
<h4 id="send_message">send_message<a class="headerlink" href="#send_message" title="Permanent link">&para;</a></h4>
<p>Send a message to a pubsub topic.</p>
<p><strong>Request</strong>:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;command&quot;</span><span class="o">:</span> <span class="s2">&quot;send_message&quot;</span><span class="p">,</span> 
  <span class="s2">&quot;project&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;project-id&gt;&quot;</span><span class="p">,</span> 
  <span class="s2">&quot;topic&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;topic-name&gt;&quot;</span><span class="p">,</span> 
  <span class="s2">&quot;data&quot;</span><span class="o">:</span> <span class="sb">`&lt;data&gt;`</span> 
<span class="p">}</span>
</code></pre></div></p>
<p><strong>Response</strong>:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;project&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;project-id&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;data&quot;</span><span class="o">:</span> <span class="sb">`&lt;data&gt;`</span><span class="p">,</span>
  <span class="s2">&quot;topic&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;topic-name&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;command&quot;</span><span class="o">:</span> <span class="s2">&quot;send_message&quot;</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong><em>Where</em></strong></p>
<ul>
<li><code>&lt;project-id&gt;</code> - The project id of the Google Cloud Pubsub project where the topic is.</li>
<li><code>&lt;topic-name&gt;</code> - The Google cloud PubSub topic name to which the message is being sent.</li>
<li><code>&lt;data&gt;</code> - The data that is to be sent as message.</li>
</ul>
<h3 id="kafka">Kafka<a class="headerlink" href="#kafka" title="Permanent link">&para;</a></h3>
<p>The Kafka offramp connects sends events to Kafka topics. It uses <code>librdkafka</code> to handle connections and can use the full set of <a href="https://github.com/edenhill/librdkafka/blob/v1.5.0/CONFIGURATION.md">librdkaka 1.5.0 configuration options</a>.</p>
<p>The default <a href="codecs.html#json">codec</a> is <code>json</code>.</p>
<p>Supported configuration options are:</p>
<ul>
<li><code>topic</code> - The topic to send to.</li>
<li><code>brokers</code> - Broker servers to connect to. (Kafka nodes)</li>
<li><code>hostname</code> - Hostname to identify the client with. (default: the systems hostname)</li>
<li><code>key</code> - Key to use for messages (default: none)</li>
<li><code>rdkafka_options</code> - An optional map of option to value, where both sides need to be strings.</li>
</ul>
<p>Used metadata variables:</p>
<ul>
<li><code>$kafka</code> - Record consisting of the following meta information:<ul>
<li><code>$headers</code>: A record denoting the <a href="https://kafka.apache.org/20/javadoc/index.html?org/apache/kafka/connect/header/Header.html">headers</a> for the message.</li>
<li><code>$key</code>: Same as config <code>key</code> (optional. overrides related config param when present)</li>
</ul>
</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kafka-out</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kafka</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">brokers</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">kafka:9092</span>
      <span class="nt">topic</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">demo</span>
</code></pre></div>
<h3 id="kv">kv<a class="headerlink" href="#kv" title="Permanent link">&para;</a></h3>
<p>The <code>kv</code> offramp is intended to allow for a decoupled way of persisting and retrieving state in a non blocking way.</p>
<p>The <code>kv</code> store is persisted to the directory configured in <code>config.dir</code>. If it doesnt exist, it will be created.</p>
<p>Example:
<div class="highlight"><pre><span></span><code>  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kv</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">kv</span>
    <span class="nt">linked</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>     <span class="c1"># this needs to be true</span>
    <span class="nt">codec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">json</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">dir</span><span class="p">:</span> <span class="s">&quot;temp/kv&quot;</span> <span class="c1"># directory to store data in</span>
</code></pre></div></p>
<p>One response event is sent for every command in the handled event. On success to the <code>out</code> port, in the error case (invalid format or error during kv operation) to the <code>err</code> port.
Each response event will have the following metadata structure:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;kv&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;op&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;string&gt;|null&quot;</span> <span class="c1">// contains the command key that was used to trigger this response, can be `null` for error events.</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">Events</span> <span class="nx">sent</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">KV</span> <span class="nx">offramp</span> <span class="nx">contain</span> <span class="nx">commands</span><span class="p">.</span> <span class="nx">The</span> <span class="nx">following</span> <span class="nx">are</span> <span class="nx">supported</span><span class="o">:</span>

<span class="err">####</span> <span class="nx">get</span>

<span class="nx">Fetches</span> <span class="nx">the</span> <span class="nx">data</span> <span class="k">for</span> <span class="nx">a</span> <span class="nx">given</span> <span class="nx">key</span><span class="p">.</span>

<span class="o">**</span><span class="nx">Request</span><span class="o">**:</span>
<span class="sb">```js</span>
<span class="sb">{&quot;get&quot;: {&quot;key&quot;: &quot;&lt;string|binary&gt;&quot;}}</span>
</code></pre></div>
<p><strong>Response</strong>:</p>
<p>Key was found, the format of decoded depends on the codec (does NOT have to be a string):
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;ok&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;binary&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;decoded&gt;&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>Key was not found:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;ok&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;binary&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="kc">null</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="put">put<a class="headerlink" href="#put" title="Permanent link">&para;</a></h4>
<p>Writes a value to a key, returns the old value if there was any.</p>
<p><strong>Request</strong>:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;put&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;string|binary&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;to encode&gt;&quot;</span> <span class="c1">// the format of value depends on the codec (does NOT have to be a string)</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p><strong>Response</strong>:</p>
<p>Key was used before, this is the old value, the format of decoded depends on the codec (does NOT have to be a string):
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;ok&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;binary&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;decoded&gt;&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>Key was not used before:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;ok&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;binary&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="kc">null</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<h4 id="delete">delete<a class="headerlink" href="#delete" title="Permanent link">&para;</a></h4>
<p>Deletes a key, returns the old value if there was any.</p>
<p><strong>Request</strong>:
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="s2">&quot;delete&quot;</span><span class="o">:</span> <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;string|binary&gt;&quot;</span><span class="p">}}</span>
</code></pre></div></p>
<p><strong>Response</strong>:</p>
<p>Key was used before, this is the old value, the format of decoded depends on the codec (does NOT have to be a string):</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;ok&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;binary&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;decoded&gt;&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Key was not used before:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;ok&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;binary&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="kc">null</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="scan">scan<a class="headerlink" href="#scan" title="Permanent link">&para;</a></h4>
<p>Reads a range of keys</p>
<p><strong>Request</strong>:
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="s2">&quot;scan&quot;</span><span class="o">:</span> <span class="p">{</span>
   <span class="s2">&quot;start&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;string|binary&gt;&quot;</span><span class="p">,</span> <span class="c1">// optional, if not set will start with the first key</span>
   <span class="s2">&quot;end&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;string|binary&gt;&quot;</span><span class="p">,</span> <span class="c1">// optional, if not set will read to the end key</span>
<span class="p">}}</span>
</code></pre></div>
<strong>Response</strong>:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;ok&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;binary&gt;&quot;</span><span class="p">,</span> <span class="c1">// keys are ALWAYS encoded as binary since we don&#39;t know if it&#39;s a string or binary</span>
      <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;decoded&gt;&quot;</span> <span class="c1">// the value, the format of decoded depends on the codec (does NOT have to be a string)</span>
    <span class="p">}</span> <span class="c1">// repeated, may be empty</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></p>
<h4 id="cas">cas<a class="headerlink" href="#cas" title="Permanent link">&para;</a></h4>
<p>Compare And Swap operation. Those operations require old values to match what it is compared to</p>
<p><strong>Request</strong>:
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="s2">&quot;cas&quot;</span><span class="o">:</span> <span class="p">{</span>
   <span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;string|binary&gt;&quot;</span><span class="p">,</span> <span class="c1">// The key to operate on</span>
   <span class="s2">&quot;old&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;to encode|not-set&gt;&quot;</span><span class="p">,</span> <span class="c1">// The old value, if not set means &quot;this value wasn&#39;t present&quot;</span>
   <span class="s2">&quot;new&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;to encode|not-set&gt;&quot;</span><span class="p">,</span> <span class="c1">// The new value, if not set it means it gets deleted</span>
<span class="p">}}</span>
</code></pre></div>
<strong>Response</strong>:
On success:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;ok&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;binary&gt;&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>On failure:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
  <span class="s2">&quot;error&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;current&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;decoded&gt;&quot;</span><span class="p">,</span> <span class="c1">// the value that is currently stored, the format of decoded depends on the codec (does NOT have to be a string)</span>
    <span class="s2">&quot;proposed&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;decoded&gt;&quot;</span> <span class="c1">// the value that was proposed/expected to be there, the format of decoded depends on the codec (does NOT have to be a string)</span>
  <span class="p">},</span>
  <span class="s2">&quot;key&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;binary&gt;&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="nats">nats<a class="headerlink" href="#nats" title="Permanent link">&para;</a></h3>
<p>The <code>nats</code> offramp connects to Nats server(s) and publishes a message to specified subject for every event.</p>
<p>The default <a href="codecs.html#json">codec</a> is <code>json</code>.</p>
<p>Supported configuration operations are:</p>
<ul>
<li><code>hosts</code> - List of hosts to connect to.</li>
<li><code>subject</code> - Subject for the message to be published.</li>
<li><code>reply</code> - Optional string specifying the reply subject.</li>
<li><code>headers</code> - Option key-value pairs, specifying message headers, where the key is a string and the value is a list of strings.</li>
<li>
<p><code>options</code> - Optional struct, which can be used to customize the connection to the server (see <a href="https://docs.rs/nats/0.9.8/nats/struct.Options.html"><code>nats.rs</code> configuration options</a> for more info):</p>
<ul>
<li><code>token</code>: String; authenticate using a token.</li>
<li><code>username</code>: String; authenticate using a username and password.</li>
<li><code>password</code>: String; authenticate using a username and password.</li>
<li><code>credentials_path</code>: String; path to a <code>.creds</code> file for authentication.</li>
<li><code>cert_path</code>: String; path to the client certificate file.</li>
<li><code>key_path</code>: String; path to private key file.</li>
<li><code>name</code>: String; name this configuration.</li>
<li><code>echo</code>: Boolean; if true, published messages will not be delivered.</li>
<li><code>max_reconnects</code>: Integer; max number of reconnection attempts.</li>
<li><code>reconnect_buffer_size</code>: Integer; max amount of bytes to buffer when accepting outgoing traffic in disconnected mode.</li>
<li><code>tls</code>: Boolean; if true, sets tls for <em>all</em> server connections.</li>
<li><code>root_cert</code>: String; path to a root certificate.</li>
</ul>
</li>
</ul>
<p>Used metadata variables are:</p>
<ul>
<li>
<p><code>$nats</code>: Record consisting of the following metadata:</p>
<ul>
<li><code>$reply</code>: Overrides <code>config.reply</code> if present.</li>
<li><code>$headers</code>: Overrides <code>config.headers</code> if present.</li>
</ul>
</li>
</ul>
<p>Example:
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nats-out</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nats</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">hosts</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="s">&quot;127.0.0.1:4444&quot;</span>
      <span class="nt">subject</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">demo</span>
      <span class="nt">reply</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ghost</span>
      <span class="nt">headers</span><span class="p">:</span>
        <span class="nt">snot</span><span class="p">:</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">badger</span>
          <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">ferris</span>
      <span class="nt">options</span><span class="p">:</span>
        <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">nats-demo</span>
        <span class="nt">reconnect_buffer_size</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</code></pre></div></p>
<h3 id="newrelic">newrelic<a class="headerlink" href="#newrelic" title="Permanent link">&para;</a></h3>
<p>Send events to <a href="https://newrelic.com/">New Relic</a> platform, using its log apis (variable by region).</p>
<p>This offramp encodes events as json, as this is required by the <code>newrelic</code> log api. Postprocessors are not used.</p>
<p>Supported configuration options are:</p>
<ul>
<li><code>license_key</code> - New Relic's license (or insert only) key</li>
<li><code>compress_logs</code> - Whether logs should be compressed before sending to New Relic  (avoids extra egress costs but at the cost of more cpu usage by tremor) (default: false)</li>
<li><code>region</code> - Region to use to send logs. Available choices: USA, Europe (default: USA)</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">newrelic</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">newrelic</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">license_key</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">keystring</span>
      <span class="nt">compress_logs</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class="nt">region</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">europe</span>
</code></pre></div>
<h3 id="otel">otel<a class="headerlink" href="#otel" title="Permanent link">&para;</a></h3>
<p>CNCF OpenTelemetry offramp. Publishes to the specified host or IP and destination TCP port via gRPC messages
conforming to the CNCF OpenTelemetry protocol specification v1. Forwards tremor value variants of <code>logs</code>, <code>trace</code>
and <code>metrics</code> messages from tremor query pipelines downstream to remote OpenTelemetry endpoints.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The offramp is experimental.</p>
</div>
<p>Supported configuration options are:</p>
<ul>
<li><code>host</code> - String - The host or IP to listen on</li>
<li><code>port</code> - integer - The TCP port to listen on</li>
<li>'logs' - boolean - Is logging enabled for this instance. Defaults to <code>true</code>. Received <code>logs</code> events are dropped when <code>false</code>.</li>
<li>'metrics' - boolean - Is metrics enabled for this instance. Defaults  to <code>true</code>. Defaults to <code>true</code>. Received <code>metrics</code> events are dropped when <code>false</code>.</li>
<li>'trace' - boolean - Is trace enabled for this instance. Defaults to <code>true</code>. Defaults to <code>true</code>. Received <code>trace</code> events are dopped when <code>false</code>.</li>
</ul>
<p>Pipelines that leverage the OpenTelemetry integration can use utility modules in the <code>cncf::otel</code> module to
simplify working with the tremor value mapping of the event data. The connector translates the tremor value level
data to protocol buffers automatically for distribution to downstream OpenTelemetry systems.</p>
<p>The connector can be used with the <code>qos::wal</code> operator for transient in-memory or persistent disk-based guaranteed delivery. If either
tremor or the downstream system fails or becomes uncontactable users can configure ( bytes and/or number of messages retained ) retention
for lossless recovery. For events marked as transactional that are explicitly acknowledged, <code>fail</code> insights are propagated for events that
are not succesfully transmitted downstream. Non-transactional events ( those not marked as transactional ) are delivered on a best effort
basis. Regardless of the transaction configuration, when paired with qos operators upstream pipelines, the sink will coordinate failover
and recovery to the configured retention, replaying the retained messages upon recovery of network accessibility of the downstream endpoints.</p>
<p>For best effort delivery - the <code>qos::wal</code> can be omitted and events distributed when downstream endpoints are inaccessible will be
lost.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">otlp</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">otel</span>
    <span class="nt">codec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">json</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">4317</span>
      <span class="nt">host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">10.0.2.1</span>
</code></pre></div>
<h3 id="postgresql">PostgreSQL<a class="headerlink" href="#postgresql" title="Permanent link">&para;</a></h3>
<p>PostgreSQL offramp.</p>
<p>Supported configuration options are:</p>
<ul>
<li><code>host</code> - PostgreSQL database hostname</li>
<li><code>port</code> - PostgresSQL database port</li>
<li><code>user</code> - Username for authentication</li>
<li><code>password</code> - Password for authentication</li>
<li><code>dbname</code> - Database name</li>
<li><code>table</code> - Database table name</li>
</ul>
<p>Data that comes in will be used to run an <code>INSERT</code> statement. It is required
that data comes in objects representing columns. The object key must represent field
name in the database and must contain following fields:</p>
<ul>
<li><code>fieldType</code> - a PostgreSQL field type (e.g. <code>VARCHAR</code>, <code>INT4</code>, <code>TIMESTAMPTZ</code>,
  etc.)</li>
<li><code>name</code> - field name as represented by database table schema</li>
<li><code>value</code> - the value of the field</li>
</ul>
<p><code>codec</code> and <code>postprocessors</code> config values are ignored as they cannot apply to this offramp, since the event is transformed into a SQL query.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>id: db
type: postgres
config:
  host: localhost
  port: 5432
  user: postgres
  password: example
  dbname: sales
  table: transactions
</code></pre></div>
<h3 id="rest">rest<a class="headerlink" href="#rest" title="Permanent link">&para;</a></h3>
<p>The rest offramp is used to send events to the specified endpoint.</p>
<p>Supported configuration options are:</p>
<ul>
<li><code>endpoint</code> - Endpoint URL. Can be provided as string or as struct. The struct form is composed of the following standard URL fields:<ul>
<li><code>scheme</code> - String, required, typically <code>http</code></li>
<li><code>username</code> - String, optional</li>
<li><code>password</code> - String, optional</li>
<li><code>host</code> - String, required, hostname or ip address</li>
<li><code>port</code> - Number, optional, defaults to <code>80</code></li>
<li><code>path</code> - String, optional, defaults to <code>/</code></li>
<li><code>query</code> - String, optional</li>
<li><code>fragment</code> - String, optional</li>
</ul>
</li>
<li><code>method</code> - HTTP method to use (default: <code>POST</code>)</li>
<li><code>headers</code> - A map of headers to set for the requests, where both sides are strings</li>
<li><code>concurrency</code> - Number of parallel in-flight requests (default: <code>4</code>)</li>
</ul>
<p>Used metadata variables:</p>
<blockquote>
<p>Setting these metadata variables here allows users to dynamically change the behaviour of the rest offramp:</p>
</blockquote>
<ul>
<li><code>$endpoint</code> - same format as config <code>endpoint</code> (optional. overrides related config param when present)</li>
<li><code>$request</code> - A record capturing the HTTP request attributes. Available fields within:<ul>
<li><code>method</code> - same as config <code>method</code> (optional. overrides related config param when present)</li>
<li><code>headers</code> - A map from header name (string) to header value (string or array of strings)(optional. overrides related config param when present)</li>
</ul>
</li>
</ul>
<p>These variables are aligned with the similar variables generated by the <a href="onramps.html#rest">rest onramp</a>. Note that <code>$request.url</code> is not utilized here -- instead the same can be configured by setting <code>$endpoint</code> (since enabling the former here can lead to request loops when events sourced from rest onramp are fed to the rest offramp, without overriding it from the pipeline. also, <code>$endpoint</code> can be separately configured as a URL string, which is convenient for simple offramp use).</p>
<p>The rest offramp encodes the event as request body using the <code>Content-Type</code> header if present, using the customizable builtin <code>codec_map</code> to determine a matching coded. It falls back to use the configured codec if no <code>Content-Type</code> header is available.</p>
<p>When used as <a href="../operations/linked-transports.html">Linked Transport</a> the same handling is applied to the incoming HTTP response, giving precedence to the <code>Content-Type</code> header and only falling back to the configured <code>codec</code>.</p>
<p>If the number of parallel requests surpass <code>concurrency</code>, an error event will be emitted to the <code>err</code> port, which can be used for appropriate error handling.</p>
<p>Set metadata variables:</p>
<blockquote>
<p>These metadata variables are used for HTTP response events emitted through the <code>OUT</code> port:</p>
</blockquote>
<ul>
<li><code>$response</code> - A record capturing the HTTP response attributes. Available fields within:<ul>
<li><code>status</code> - Numeric HTTP status code</li>
<li><code>headers</code> - A record that maps header name (lowercase string) to value (array of strings)</li>
</ul>
</li>
<li><code>$request</code> - A record with the related HTTP request attributes. Available fields within:<ul>
<li><code>method</code> - HTTP method used</li>
<li><code>headers</code> - A record containing all the request headers</li>
<li><code>endpoint</code> - A record containing all the fields that config <code>endpoint</code> does</li>
</ul>
</li>
</ul>
<p>When used as a linked offramp, batched events are rejected by the offramp.</p>
<p>Example 1:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rest-offramp</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rest</span>
    <span class="nt">codec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">json</span>
    <span class="nt">postprocessors</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">gzip</span>
    <span class="nt">linked</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">endpoint</span><span class="p">:</span>
        <span class="nt">host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">httpbin.org</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">80</span>
        <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/anything</span>
        <span class="nt">query</span><span class="p">:</span> <span class="s">&quot;q=search&quot;</span>
      <span class="nt">headers</span><span class="p">:</span>
        <span class="s">&quot;Accept&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;application/json&quot;</span>
        <span class="s">&quot;Transfer-Encoding&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;gzip&quot;</span>
</code></pre></div>
<p>Example 2:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rest-offramp-2</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rest</span>
    <span class="nt">codec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">json</span>
    <span class="nt">codec_map</span><span class="p">:</span>
      <span class="s">&quot;text/html&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;string&quot;</span>
      <span class="s">&quot;application/vnd.stuff&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;string&quot;</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">endpoint</span><span class="p">:</span>
        <span class="nt">host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">httpbin.org</span>
        <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/patch</span>
      <span class="nt">method</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">PATCH</span>
</code></pre></div>
<h4 id="rest-offramp-example-for-influxdb">rest offramp example for InfluxDB<a class="headerlink" href="#rest-offramp-example-for-influxdb" title="Permanent link">&para;</a></h4>
<p>The structure is given for context.</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">influxdb</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rest</span>
    <span class="nt">codec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">influx</span>
    <span class="nt">postprocessors</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">lines</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">endpoint</span><span class="p">:</span>
        <span class="nt">host</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">influx</span>
        <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/write</span>
        <span class="nt">query</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">db=metrics</span>
      <span class="nt">headers</span><span class="p">:</span>
        <span class="s">&quot;Client&quot;</span><span class="p p-Indicator">:</span> <span class="s">&quot;Tremor&quot;</span>
</code></pre></div>
<h3 id="stderr">stderr<a class="headerlink" href="#stderr" title="Permanent link">&para;</a></h3>
<p>A custom stderr offramp can be configured by using this offramp type. But beware that this will share the single stderr stream with <code>system::stderr</code>.</p>
<p>The default codec is <a href="codecs.html#json">json</a>.</p>
<p>The stderr offramp will write a <code>\n</code> right after each event, and optionally prefix every event with a configurable <code>prefix</code>.</p>
<p>If the event data (after codec and postprocessing) is not a valid UTF8 string (e.g. if it is binary data) if will by default output the bytes with debug formatting.
If <code>raw</code> is set to true, the event data will be put on stderr as is.</p>
<p>Supported configuration options:</p>
<ul>
<li><code>prefix</code> - A prefix written before each event (optional string).</li>
<li><code>raw</code> - Write event data bytes as is to stderr.</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">raw_stuff</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">stderr</span>
    <span class="nt">codec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">json</span>
    <span class="nt">postprocessors</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">snappy</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">raw</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<h3 id="stdout">stdout<a class="headerlink" href="#stdout" title="Permanent link">&para;</a></h3>
<p>A custom stdout offramp can be configured by using this offramp type. But beware that this will share the single stdout stream with <code>system::stdout</code>.</p>
<p>The default codec is <a href="codecs.html#json">json</a>.</p>
<p>The stdout offramp will write a <code>\n</code> right after each event, and optionally prefix every event with a configurable <code>prefix</code>.</p>
<p>If the event data (after codec and postprocessing) is not a valid UTF8 string (e.g. if it is binary data) if will by default output the bytes with debug formatting.
If <code>raw</code> is set to true, the event data will be put on stdout as is.</p>
<p>Supported configuration options:</p>
<ul>
<li><code>prefix</code> - A prefix written before each event (optional string).</li>
<li><code>raw</code> - Write event data bytes as is to stdout.</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">like_a_python_repl</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">stdout</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">prefix</span><span class="p">:</span> <span class="s">&quot;&gt;&gt;&gt;</span><span class="nv"> </span><span class="s">&quot;</span>
</code></pre></div>
<h3 id="tcp">tcp<a class="headerlink" href="#tcp" title="Permanent link">&para;</a></h3>
<p>This connects on a specified port for distributing outbound TCP data. TLS is supported via <a href="https://github.com/ctz/rustls">rustls</a>.</p>
<p>The offramp can leverage postprocessors to frame data after codecs are applied and events are forwarded
to external TCP protocol distribution endpoints.</p>
<p>The default <a href="codecs.html#json">codec</a> is <code>json</code>.</p>
<p>Supported configuration options are:</p>
<ul>
<li><code>host</code> - The host to advertise as</li>
<li><code>port</code> - The TCP port to listen on</li>
<li><code>is_non_blocking</code> - Is the socket configured as non-blocking ( default: false )</li>
<li><code>ttl</code> - Set the socket's time-to-live ( default: 64 )</li>
<li><code>is_no_delay</code> - Set the socket's Nagle ( delay ) algorithm to off ( default: true )</li>
<li><code>tls</code> - If set to <code>true</code> or a detailed TLS config with the keys below, will wrap the TCP socket with a TLS session. ( default: <code>false</code> )<ul>
<li><code>cafile</code> - If provided, only server certificates signed by the Certificate Authority represented by the root certificate in <code>cafile</code> are accepted. If not provided, all root certificated distributed by Mozilla via <a href="https://github.com/rustls/webpki-roots">webpki-roots</a> are loaded.</li>
<li><code>domain</code> - if provided, this will be the domain to verify the TLS certificate against. It might differ to <code>host</code>, especially if <code>host</code> is given as IP address. If not provided, the <code>host</code> config is used as domain.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">tcp</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">tcp</span>
    <span class="nt">codec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">json</span>
    <span class="nt">postprocessors</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">gzip</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">base64</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">lines</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">host</span><span class="p">:</span> <span class="s">&quot;localhost&quot;</span>
      <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">9000</span>
</code></pre></div>
<h4 id="tls-support">TLS Support<a class="headerlink" href="#tls-support" title="Permanent link">&para;</a></h4>
<p>TLS support is enabled by providing either <code>tls: true</code> or a detailed config.</p>
<p>When providing <code>tls: true</code>, the TCP offramp is verifying the server it connects to and its certificate against the <code>host</code> config, and a set of common root-certificates provided by Mozilla via <a href="https://github.com/rustls/webpki-roots">webpki-roots</a>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">tcp</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">tcp</span>
    <span class="nt">codec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">json</span>
    <span class="nt">postprocessors</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">length-prefixed</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">host</span><span class="p">:</span> <span class="s">&quot;example.com&quot;</span>
      <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">443</span>
      <span class="nt">tls</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<p>This behaviour can be tuned by providing a detailed config. If <code>tls.cafile</code> is provided, the TCP offramp will only accept server certificates signed (directly or indirectly via a server-provided certificate chain) by the given root-certificate. This is useful for testing against self-signed certificates. In this case the self signed certificate needs to provided via <code>tls.cafile</code>. If <code>tls.domain</code> is provided, this value will be used instead of the <code>host</code> config to verify the domain name provided in the server certificate. This is especially useful if an IP address is used as <code>host</code> config.</p>
<p>Client certificates are not supported.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">tls</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">tcp</span>
    <span class="nt">codec</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">json</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">host</span><span class="p">:</span> <span class="s">&quot;127.0.0.1&quot;</span>
      <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">65535</span>
      <span class="nt">tls</span><span class="p">:</span>
        <span class="nt">cafile</span><span class="p">:</span> <span class="s">&quot;path/to/custom_ca.pem&quot;</span>
        <span class="nt">domain</span><span class="p">:</span> <span class="s">&quot;localhost&quot;</span>
</code></pre></div>
<p>For testing purposes, self-signed certificates need the Subject Alternative Name extension, otherwise setting up the onramp will fail with a <code>BadDER</code> Error. Adding this when generating a self-signed certificate can be done by passing <code>-addext 'subjectAltName = DNS:&lt;DOMAIN&gt;'</code> via <code>openssl</code> command line or by adding it to <code>openssl.cfg</code> as described in the <a href="https://www.openssl.org/docs/man1.1.1/man5/x509v3_config.html#Subject-Alternative-Name">openssl manual</a>.</p>
<h3 id="udp">udp<a class="headerlink" href="#udp" title="Permanent link">&para;</a></h3>
<p>The UDP offramp sends data to a given host and port as UDP datagram.</p>
<p>The default <a href="codecs.html#json">codec</a> is <code>json</code>.</p>
<p>When the UDP onramp gets a batch of messages it will send each element of the batch as a distinct UDP datagram.</p>
<p>Supported configuration options are:</p>
<ul>
<li><code>bind.host</code> - the local host to send data from</li>
<li><code>bind.port</code> - the local port to send data from</li>
<li><code>host</code> - the destination host to send data to</li>
<li><code>port</code> - the destination port to send data to.</li>
</ul>
<div class="admonition warn">
<p class="admonition-title">Warn</p>
<p>Setting <code>bound</code> to <code>false</code> makes the UDP offramp potentially extremely slow as it forces a lookup of the destination on each event!</p>
</div>
<p>Used metadata variables:</p>
<ul>
<li><code>$udp.host</code>: This overwrites the configured destination host for this event. Expects a string.</li>
<li><code>$udp.port</code>: This overwrites the configured destination port for this event. Expects an integer.</li>
</ul>
<div class="admonition warn">
<p class="admonition-title">Warn</p>
<p>Be careful to set <code>$udp.host</code> to an IP, <strong>not</strong> a DNS name or the OS will resolve it on every event, which will be extremely slow!</p>
</div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">offramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">udp-out</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">udp</span>
    <span class="nt">postprocessors</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">base64</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">bind</span><span class="p">:</span>
        <span class="nt">host</span><span class="p">:</span> <span class="s">&quot;10.11.12.13&quot;</span>
        <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1234</span>
      <span class="nt">host</span><span class="p">:</span> <span class="s">&quot;20.21.22.23&quot;</span>
      <span class="nt">port</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2345</span>
</code></pre></div>
<h3 id="ws">ws<a class="headerlink" href="#ws" title="Permanent link">&para;</a></h3>
<p>Sends events over a WebSocket connection. Each event is a WebSocket message.</p>
<p>The default <a href="codecs.html#json">codec</a> is <code>json</code>.</p>
<p>Supported configuration options are:</p>
<ul>
<li><code>url</code> - WebSocket endpoint to send data to.</li>
<li><code>binary</code> - If data should be send as binary instead of text (default: <code>false</code>).</li>
</ul>
<p>Used metadata variables:</p>
<ul>
<li><code>$url</code> - same as config <code>url</code> (optional. overrides related config param when present)</li>
<li><code>$binary</code> - same as config <code>binary</code> (optional. overrides related config param when present)</li>
</ul>
<p>Set metadata variables (for reply with <a href="../operations/linked-transports.html">linked transports</a>):</p>
<ul>
<li><code>$binary</code> - <code>true</code> if the WebSocket message reply came as binary (<code>false</code> otherwise)</li>
</ul>
<p>When used as a linked offramp, batched events are rejected by the offramp.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nt">onramp</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">id</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ws</span>
    <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">ws</span>
    <span class="nt">config</span><span class="p">:</span>
      <span class="nt">url</span><span class="p">:</span> <span class="s">&quot;ws://localhost:1234&quot;</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="onramps.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Onramps" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Onramps
            </div>
          </div>
        </a>
      
      
        
        <a href="../api.html" class="md-footer__link md-footer__link--next" aria-label="Next: API" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              API
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.b0710199.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.76f349be.min.js"></script>
      
    
  </body>
</html>